#include "resources/foo.jc"

int fib(int a){
   if(a <= 2){
        return 1;
   }
   return fib(a - 1) + fib(a - 2);
}

int for_sum(){
    int sum = 0;
    for(int i = 0; i < 10; i++){
        sum += i;
    }
    return sum;
}

int rec_struct(Bar bar){
    return bar.foo.a;
}

int arr_conversions(){
    float * arrf = malloc(16);
    arrf[0] = 1;
    arrf[1] = 2.0;
    int * arri = malloc(16);
    arri[0] = 10;
    arri[1] = 20.0;

    return arrf[0] + arrf[1] + arri[0] + arri[1];

}

int move_struct(){
    Foo foo0;
    foo0.a = 5;
    Foo foo1;

    foo1 = foo0;
    return foo1.a;
}


void write_to_pointer(int * a){
    *a = 5;
}

void pointer_switchero(Foo ** foo, Foo * foo1){
    (*foo).a = 20;
    foo1.a = 30;
    return;
}

int run_tests(){
    printf("%d = 8?", fib(6));
    printf("%d = 45?", for_sum());

    Bar bar;
    bar.c = 3;
    bar.foo.a = 5;
    bar.foo.b = 2;
    printf("%d = 5?", rec_struct(bar));


    int result = arr_conversions();
    printf("%d = 33?", result);

    printf("%d = 5?", move_struct());

    int * a = malloc(8);
    write_to_pointer(a);
    printf("%d = 5?", *a);

    Foo * foo = malloc(8);
    foo.a = 3;

    Foo foo1;
    foo1.a = 2;
    pointer_switchero(&foo, &foo1);
    printf("%d == 50?", foo.a + foo1.a);
}
